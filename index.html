<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paradise Handball League - Player Registration 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom Styles */
        body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }
        .form-container { max-width: 800px; margin: 2rem auto; background-color: white; border-radius: 12px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden; }
        .form-header { background: linear-gradient(135deg, #4a90e2, #50e3c2); color: white; padding: 1.5rem 2rem; border-bottom: 1px solid #e5e7eb; text-align: center; }
        .form-header img { max-width: 150px; margin-bottom: 1rem; display: inline-block; }
        .form-step { padding: 2rem; display: none; }
        .form-step.active { display: block; }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 0.75rem 1rem; border: 1px solid #d1d5db; border-radius: 8px; margin-top: 0.25rem; transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: #4a90e2; box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2); }
        .form-label { display: block; font-weight: 600; margin-bottom: 0.25rem; color: #374151; }
        .btn { padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out; display: inline-flex; align-items: center; justify-content: center; text-align: center; }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background-color: #4a90e2; color: white; border: none; }
        .btn-primary:hover { background-color: #357abd; }
        .btn-secondary { background-color: #e5e7eb; color: #374151; border: 1px solid #d1d5db; }
        .btn-secondary:hover { background-color: #d1d5db; }
        .button-group { display: flex; justify-content: space-between; margin-top: 1.5rem; }
        .error-message { color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem; min-height: 1.25rem; /* Reserve space */ }
        .terms-section { background-color: #f9fafb; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; border: 1px solid #e5e7eb; }
        .terms-section h3 { font-size: 1.1rem; font-weight: 600; margin-bottom: 0.75rem; color: #1f2937; }
        .terms-section ul { list-style-type: decimal; margin-left: 1.5rem; color: #4b5563; }
        .terms-section li { margin-bottom: 0.5rem; }
        .contact-info { margin-top: 1rem; font-size: 0.9rem; color: #4b5563; }
        .payment-instructions { background-color: #fffbeb; border: 1px solid #fef3c7; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; }
        .payment-instructions strong { color: #b45309; }
        /* Removed QR code container styles */
        /* .qr-code-container { text-align: center; margin-bottom: 1rem; }
        .qr-code-container img { max-width: 200px; height: auto; margin: 0 auto; border: 1px solid #eee; padding: 5px; border-radius: 8px; } */
        /* Responsive Design */
        @media (max-width: 768px) { .form-container { margin: 1rem; } .form-step { padding: 1.5rem; } .button-group { flex-direction: column; gap: 0.5rem; } .button-group .btn { width: 100%; } }
        @media (max-width: 480px) { .form-header { padding: 1rem 1.5rem; } .form-header h1 { font-size: 1.25rem; } .form-step { padding: 1rem; } }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-header">
             <img src="images/logo.jpeg" alt="Paradise Handball League Logo" class="rounded" onerror="this.style.display='none'; console.error('Logo not found at images/logo.jpeg')">
            <h1 class="text-2xl font-bold">Paradise Handball League – Player Registration 2025</h1>
            <p class="mt-2 text-sm opacity-90">Welcome! Please fill the form and follow payment instructions.</p>
        </div>

        <form id="registrationForm" action="/api/register" method="POST" enctype="multipart/form-data" novalidate>
            <div id="step-1" class="form-step active">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">Player Registration Information</h2>
                <p class="mb-4 text-gray-600">
                    This form is for players who wish to enter the bidding process for team selection in the Paradise Handball League 2025.
                    Please fill out the registration form carefully with accurate and complete information.
                </p>
                <div class="terms-section">
                    <h3>Important Notes & Terms:</h3>
                    <ul>
                        <li>All fields in the registration form are compulsory unless marked optional.</li>
                        <li>Registration requires a payment of ₹100. Payment details are provided in the next step.</li>
                        <li>A screenshot of the successful payment must be uploaded to complete registration.</li>
                        <li>Registration will only be considered complete after manual verification of the payment screenshot by the admin.</li>
                        <li>Payment is non-refundable under any circumstances.</li>
                        <li>If a player is not selected by any team owner during the bidding process, the ₹100 registration fee will still not be refunded.</li>
                        <li>Last date for player registration is <strong id="registrationEndDateText">10th May 2025</strong>. No entries will be accepted after this deadline.</li>
                        <li>This form is specifically for the player bidding process in Paradise Handball League 2025.</li>
                    </ul>
                    <div class="contact-info mt-4">
                        <strong>For Any Clarifications, Contact:</strong><br>
                        9797219983 | 9596251338 | 7006453652
                    </div>
                </div>

                <div id="registrationClosedMessage" class="hidden p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg" role="alert">
                    <span class="font-medium">Registration Closed!</span> The registration deadline (<span id="deadlineDateText">10th May 2025</span>) has passed. New registrations are no longer accepted.
                </div>

                <div class="button-group justify-end">
                    <button type="button" id="nextButtonStep1" class="btn btn-primary">Fill Registration Form</button>
                </div>
            </div>

            <div id="step-2" class="form-step">
                <h2 class="text-xl font-semibold mb-6 text-gray-800">Player Details</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4"> <div>
                        <label for="email" class="form-label">Email <span class="text-red-500">*</span></label>
                        <input type="email" id="email" name="email" class="form-input" required>
                        <p class="error-message" id="error-email"></p>
                    </div>
                    <div>
                        <label for="name" class="form-label">Name (As per document) <span class="text-red-500">*</span></label>
                        <input type="text" id="name" name="name" class="form-input" required>
                         <p class="error-message" id="error-name"></p>
                    </div>
                    <div>
                        <label for="father_name" class="form-label">Father's Name <span class="text-red-500">*</span></label>
                        <input type="text" id="father_name" name="father_name" class="form-input" required>
                         <p class="error-message" id="error-father_name"></p>
                    </div>
                    <div>
                        <label for="mother_name" class="form-label">Mother's Name <span class="text-red-500">*</span></label>
                        <input type="text" id="mother_name" name="mother_name" class="form-input" required>
                         <p class="error-message" id="error-mother_name"></p>
                    </div>
                    <div>
                        <label for="dob" class="form-label">Date of Birth (DOB) <span class="text-red-500">*</span></label>
                        <input type="date" id="dob" name="dob" class="form-input" required> <p class="error-message" id="error-dob"></p>
                    </div>
                    <div>
                        <label for="phone" class="form-label">Phone Number / WhatsApp <span class="text-red-500">*</span></label>
                        <input type="tel" id="phone" name="phone" class="form-input" pattern="[6-9][0-9]{9}" title="Please enter a valid 10-digit Indian mobile number" required>
                        <p class="error-message" id="error-phone"></p>
                    </div>
                    <div>
                        <label for="gender" class="form-label">Gender <span class="text-red-500">*</span></label>
                        <select id="gender" name="gender" class="form-select" required>
                            <option value="" disabled selected>Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                         <p class="error-message" id="error-gender"></p>
                    </div>
                    <div>
                        <label for="district" class="form-label">District <span class="text-red-500">*</span></label>
                        <input type="text" id="district" name="district" class="form-input" required>
                         <p class="error-message" id="error-district"></p>
                    </div>
                    <div class="md:col-span-2">
                        <label for="aadhaar" class="form-label">Aadhaar Number <span class="text-red-500">*</span></label>
                        <input type="text" id="aadhaar" name="aadhaar" class="form-input" inputmode="numeric" pattern="\d{12}" title="Please enter a valid 12-digit Aadhaar number" required> <p class="error-message" id="error-aadhaar"></p>
                    </div>

                    <div class="md:col-span-2 mt-4">
                        <h3 class="text-lg font-semibold mb-2 text-gray-700">Achievements</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <div>
                                <label for="district_achievements" class="form-label">District <span class="text-red-500">*</span></label>
                                <input type="text" id="district_achievements" name="district_achievements" class="form-input" placeholder="e.g., Gold Medal 2024" required>
                                 <p class="error-message" id="error-district_achievements"></p>
                            </div>
                            <div>
                                <label for="state_achievements" class="form-label">State <span class="text-red-500">*</span></label>
                                <input type="text" id="state_achievements" name="state_achievements" class="form-input" placeholder="e.g., Participation 2023" required>
                                 <p class="error-message" id="error-state_achievements"></p>
                            </div>
                            <div>
                                <label for="national_achievements" class="form-label">National <span class="text-red-500">*</span></label>
                                <input type="text" id="national_achievements" name="national_achievements" class="form-input" placeholder="e.g., Bronze Medal 2022" required>
                                 <p class="error-message" id="error-national_achievements"></p>
                            </div>
                        </div>
                    </div>

                     <div>
                        <label for="player_position" class="form-label">Player Position <span class="text-red-500">*</span></label>
                        <input type="text" id="player_position" name="player_position" class="form-input" placeholder="e.g., Goalkeeper, Left Wing" required>
                         <p class="error-message" id="error-player_position"></p>
                    </div>

                    <div>
                        <label for="basic_price" class="form-label">Basic Price (₹50 - ₹200) <span class="text-red-500">*</span></label>
                        <input type="number" id="basic_price" name="basic_price" class="form-input" min="50" max="200" step="10" placeholder="e.g., 100" required>
                         <p class="error-message" id="error-basic_price"></p>
                    </div>

                    <div class="md:col-span-2">
                        <label for="passport_photo" class="form-label">Passport-size Photo <span class="text-red-500">*</span></label>
                        <input type="file" id="passport_photo" name="passport_photo" class="form-input file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" accept="image/jpeg, image/png, image/jpg" required>
                        <p class="text-xs text-gray-500 mt-1">Accepted formats: JPG, PNG, JPEG. Max size: 2MB.</p>
                         <p class="error-message" id="error-passport_photo"></p>
                    </div>
                </div>

                 <div id="formErrorMessageStep2" class="mt-4 text-center text-red-600 font-medium hidden">
                    Please fix the errors above before proceeding.
                </div>

                <div class="button-group mt-8">
                    <button type="button" id="prevButtonStep2" class="btn btn-secondary">Back</button>
                    <button type="button" id="nextButtonStep2" class="btn btn-primary">Proceed to Payment Step</button>
                </div>
            </div>

            <div id="step-3" class="form-step">
                 <h2 class="text-xl font-semibold mb-4 text-gray-800">Payment Instructions (₹100)</h2>

                 <div class="payment-instructions space-y-6">
                     <p class="mb-3">Please pay the registration fee of <strong>₹100</strong> using the details below.</p>

                     <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                         <h3 class="text-lg font-semibold text-blue-700 mb-3">Bank Transfer Details</h3>
                         <div class="space-y-3 text-gray-700">
                             <div>
                                 <p class="font-medium">Account Name:</p>
                                 <p class="ml-2">Ghulam Mohi Ud Din Zargar</p>
                             </div>
                             <div>
                                 <p class="font-medium">Account Number:</p>
                                 <p class="ml-2 font-mono text-lg text-blue-800">0132040100016555</p>
                             </div>
                             <div>
                                 <p class="font-medium">IFSC Code:</p>
                                 <p class="ml-2 font-mono text-lg text-blue-800">JAKA0KREERI</p>
                             </div>
                         </div>
                     </div>

                     <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                          <h3 class="text-lg font-semibold text-green-700 mb-3">Mobile Payment Details (MPAY JKBANK)</h3>
                          <div class="space-y-3 text-gray-700">
                             <div>
                                 <p class="font-medium">Mobile Number:</p>
                                 <p class="ml-2 font-mono text-lg text-green-800">9797219983</p>
                             </div>
                          </div>
                     </div>
                 </div>

                 <div class="mt-6">
                     <label for="payment_screenshot" class="form-label">Upload Payment Screenshot <span class="text-red-500">*</span></label>
                     <input type="file" id="payment_screenshot" name="payment_screenshot" class="form-input file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100" accept="image/jpeg, image/png, image/jpg" required>
                     <p class="text-xs text-gray-500 mt-1">Upload the screenshot of your ₹100 payment. Max size: 2MB.</p>
                     <p class="error-message" id="error-payment_screenshot"></p>
                 </div>

                 <div id="formErrorMessageStep3" class="mt-4 text-center text-red-600 font-medium hidden">
                    Please upload the payment screenshot.
                 </div>

                 <div class="button-group mt-8">
                    <button type="button" id="prevButtonStep3" class="btn btn-secondary">Back</button>
                    <button type="submit" id="submitRegistrationButton" class="btn btn-primary">
                         <span class="submit-text">Submit Registration</span>
                         <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden submit-spinner" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                         <span class="submit-spinner hidden">Submitting...</span>
                    </button>
                </div>
            </div>

            </form>
    </div>

    <script>
        // --- Configuration ---
        const REGISTRATION_END_DATE_STR = "2025-05-10T23:59:59"; //YYYY-MM-DDTHH:MM:SS

        // --- DOM Elements ---
        const form = document.getElementById('registrationForm');
        const steps = Array.from(document.querySelectorAll('.form-step'));
        const nextButtonStep1 = document.getElementById('nextButtonStep1');
        const prevButtonStep2 = document.getElementById('prevButtonStep2');
        const nextButtonStep2 = document.getElementById('nextButtonStep2');
        const prevButtonStep3 = document.getElementById('prevButtonStep3');
        const submitRegistrationButton = document.getElementById('submitRegistrationButton');
        const submitText = submitRegistrationButton.querySelector('.submit-text');
        const submitSpinner = submitRegistrationButton.querySelectorAll('.submit-spinner'); // Select all spinners
        const registrationClosedMessage = document.getElementById('registrationClosedMessage');
        const formErrorMessageStep2 = document.getElementById('formErrorMessageStep2');
        const formErrorMessageStep3 = document.getElementById('formErrorMessageStep3');
        const dobInput = document.getElementById('dob');

        // Input fields for validation
        const allInputs = form.querySelectorAll('input[required], select[required], textarea[required]');
        const step2Inputs = document.getElementById('step-2').querySelectorAll('input[required], select[required], textarea[required]');
        const step3Inputs = document.getElementById('step-3').querySelectorAll('input[required]'); // Only screenshot input in step 3

        // --- State ---
        let currentStep = 1;
        let registrationOpen = true;

        // --- Functions ---

        // Function to navigate between steps
        function goToStep(stepNumber) {
            steps.forEach((step, index) => {
                step.classList.toggle('active', index + 1 === stepNumber);
            });
            currentStep = stepNumber;
            window.scrollTo(0, 0); // Scroll to top on step change
        }

        // Function to check if registration is open
        function checkRegistrationDeadline() {
            const now = new Date();
            const endDate = new Date(REGISTRATION_END_DATE_STR);
            endDate.setHours(23, 59, 59, 999); // Include the full day

            console.log("Current Date/Time:", now); // Log current date
            console.log("Registration End Date:", endDate); // Log end date

            const endDateText = endDate.toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' });

            document.getElementById('registrationEndDateText').textContent = endDateText;
            document.getElementById('deadlineDateText').textContent = endDateText;

            if (now > endDate) {
                registrationOpen = false;
                registrationClosedMessage.classList.remove('hidden');
                // Disable all navigation/submit buttons if closed
                nextButtonStep1.disabled = true;
                nextButtonStep1.classList.add('opacity-50', 'cursor-not-allowed');
                nextButtonStep2.disabled = true;
                nextButtonStep2.classList.add('opacity-50', 'cursor-not-allowed');
                submitRegistrationButton.disabled = true;
                submitRegistrationButton.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                registrationOpen = true;
                registrationClosedMessage.classList.add('hidden');
                nextButtonStep1.disabled = false;
                nextButtonStep1.classList.remove('opacity-50', 'cursor-not-allowed');
                nextButtonStep2.disabled = false;
                nextButtonStep2.classList.remove('opacity-50', 'cursor-not-allowed');
                submitRegistrationButton.disabled = false;
                submitRegistrationButton.classList.remove('opacity-50', 'cursor-not-allowed');
            }
             console.log("Registration Open:", registrationOpen); // Log registration status
        }

        // Client-Side Validation
        function validateInput(input) {
            const errorElement = document.getElementById(`error-${input.name}`);
            let isValid = true;
            let errorMessage = '';
            const value = input.type === 'file' ? input.value : input.value.trim(); // Don't trim file input value

            // Required check (handle file inputs separately)
            if (input.required && input.type !== 'file' && value === '') {
                isValid = false; errorMessage = 'This field is required.';
            } else if (input.required && input.type === 'file' && input.files.length === 0) {
                isValid = false; errorMessage = 'This file is required.';
            }
            // Other validations only if field is not empty OR if it's a required file
            else if (value !== '' || (input.required && input.type === 'file')) {
                if (input.type === 'email' && !/^\S+@\S+\.\S+$/.test(value)) {
                    isValid = false; errorMessage = 'Please enter a valid email address.';
                } else if (input.type === 'tel' && input.pattern && !new RegExp(input.pattern).test(value)) {
                    isValid = false; errorMessage = input.title || 'Please enter a valid phone number.';
                } else if (input.name === 'aadhaar' && input.pattern && !new RegExp(input.pattern).test(value)) {
                    isValid = false; errorMessage = input.title || 'Please enter a valid 12-digit Aadhaar number.';
                } else if (input.name === 'basic_price') {
                    const price = parseFloat(value);
                    if (isNaN(price) || price < 50 || price > 200 || (price % 10 !== 0)) {
                        isValid = false; errorMessage = 'Price must be between ₹50 and ₹200 (in steps of 10).';
                    }
                } else if (input.type === 'file' && input.files.length > 0) {
                    const file = input.files[0];
                    const allowedTypes = ['image/jpeg', 'image/png', 'image/jpg'];
                    const maxSize = 2 * 1024 * 1024; // 2MB
                    if (!allowedTypes.includes(file.type)) { isValid = false; errorMessage = `Invalid file type (${file.type.split('/')[1]}). Only JPG, PNG allowed.`; }
                    else if (file.size > maxSize) { isValid = false; errorMessage = `File size (${(file.size / 1024 / 1024).toFixed(1)}MB) exceeds 2MB limit.`; }
                } else if (input.type === 'date') {
                    try {
                        const dobDate = new Date(value);
                        const today = new Date(); today.setHours(0,0,0,0);
                        if (isNaN(dobDate.getTime()) || dobDate >= today) { isValid = false; errorMessage = 'Date of Birth must be a valid date in the past.'; }
                    } catch (e) { isValid = false; errorMessage = 'Invalid Date of Birth format.'; }
                }
            }

            if (errorElement) {
                errorElement.textContent = errorMessage;
                input.classList.toggle('border-red-500', !isValid && errorMessage !== '');
                input.classList.toggle('border-d1d5db', isValid || errorMessage === '');
            }
            return isValid;
        }

        // Validate all required fields within a specific step
        function validateStep(stepInputs, errorMsgElement) {
            let isStepValid = true;
            errorMsgElement.classList.add('hidden'); // Hide general error first
            stepInputs.forEach(input => {
                if (!validateInput(input)) {
                    isStepValid = false;
                }
            });
             if (!isStepValid) {
                errorMsgElement.classList.remove('hidden'); // Show general error if any field failed
                 const firstErrorField = errorMsgElement.closest('.form-step').querySelector('.border-red-500');
                 if (firstErrorField) {
                     firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                     firstErrorField.focus({ preventScroll: true });
                 }
            }
            return isStepValid;
        }

        // Function to show submitting state on button
        function showSubmittingState(isSubmitting) {
             submitText.classList.toggle('hidden', isSubmitting);
             // Toggle hidden class on all spinner elements
             submitSpinner.forEach(spinner => spinner.classList.toggle('hidden', !isSubmitting));
             submitRegistrationButton.disabled = isSubmitting;
             submitRegistrationButton.classList.toggle('opacity-75', isSubmitting);
             submitRegistrationButton.classList.toggle('cursor-wait', isSubmitting);
        }

        // --- Handle Form Submission with Fetch API (for Vercel Serverless Function) ---
        form.addEventListener('submit', async (event) => {
            event.preventDefault(); // Prevent default form submission

            if (!registrationOpen) {
                 alert("Registration is closed."); // Consider replacing alert with a modal or message box
                 return;
            }

            // Validate Step 3 (only the screenshot input) before allowing submission
            if (!validateStep(step3Inputs, formErrorMessageStep3)) {
                return; // Stop if validation fails
            }

            showSubmittingState(true); // Show submitting state

            const formData = new FormData(form); // Get form data including files

            try {
                // Send data to the Vercel Serverless Function endpoint
                // The endpoint is defined in the form's action attribute: /api/register
                const response = await fetch(form.action, {
                    method: 'POST',
                    body: formData // FormData handles multipart/form-data
                });

                const result = await response.json(); // Assuming the serverless function returns JSON

                if (response.ok) {
                    // Handle success response from the serverless function
                    alert("Registration Submitted Successfully! Admin will verify your details and payment."); // Consider replacing alert
                    // Optionally redirect or reset form
                    // window.location.href = '/success-page.html'; // Redirect to a success page
                    form.reset(); // Reset the form after success
                    goToStep(1); // Go back to the first step
                } else {
                    // Handle error response from the serverless function
                    const errorMessage = result.message || 'An error occurred during registration.';
                    alert("Registration Failed: " + errorMessage); // Consider replacing alert
                    console.error("Registration Error:", result);
                }

            } catch (error) {
                console.error('Submission Error:', error);
                alert("An unexpected error occurred. Please try again."); // Consider replacing alert
            } finally {
                showSubmittingState(false); // Hide submitting state
            }
        });


        // Real-time validation for all inputs
        allInputs.forEach(input => {
            input.addEventListener('input', () => validateInput(input)); // Validate as user types/changes
            input.addEventListener('blur', () => validateInput(input)); // Validate when user leaves field
            if (input.type === 'file' || input.tagName === 'SELECT') {
                input.addEventListener('change', () => validateInput(input)); // Ensure validation on file/select change
            }
        });

        // --- Initialization ---
        function setMaxDobDate() {
            const today = new Date();
            today.setDate(today.getDate() - 1); // Set max date to yesterday
            const maxDate = today.toISOString().split('T')[0]; // Format asYYYY-MM-DD
            dobInput.setAttribute("max", maxDate);
         }

        setMaxDobDate();
        checkRegistrationDeadline();
        goToStep(1); // Start at Step 1

    </script>
</body>
</html>
